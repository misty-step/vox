## Purpose
This directory provides concrete implementations for Speech-to-Text (STT) and text rewrite providers. It integrates local Apple frameworks for on-device transcription with third-party cloud services like Deepgram, ElevenLabs, Gemini, and OpenRouter. The directory also includes utilities for audio format conversion and centralized provider assembly.

## Key Roles
- **AppleSpeechClient & SpeechTranscriberClient**: Provide on-device speech recognition using Apple's Speech framework, with the latter targeting macOS 26+ features.
- **DeepgramClient & DeepgramStreamingClient**: Implement batch and WebSocket-based streaming transcription via the Deepgram API.
- **ElevenLabsClient & ElevenLabsStreamingClient**: Implement batch and WebSocket-based streaming transcription via the ElevenLabs API.
- **GeminiClient & OpenRouterClient**: Provide text rewriting capabilities using Google Gemini and OpenRouter APIs, including fallback and routing logic.
- **AudioConverter**: Manages audio file conversion to Opus or WAV formats by wrapping the `/usr/bin/afconvert` system utility.
- **ProviderAssembly**: Centralizes the configuration, instrumentation, and construction of provider chains, including retry and fallback policies.
- **URLSession+PhaseAwareSTTTimeout**: Extends network tasks to handle distinct timeouts for the upload and server-side processing phases of batch STT.

## Dependencies and Caveats
- Depends on `VoxCore` for shared protocols, error types, and audio data structures.
- `AudioConverter` requires the `/usr/bin/afconvert` executable to be present and executable on the host system.
- `SpeechTranscriberClient` is gated to macOS 26.0+ and requires the `FoundationModels` framework.
- `AppleSpeechClient` requires `NSSpeechRecognitionUsageDescription` to be defined in the host bundle's `Info.plist` to avoid crashes during authorization.
- Cloud-based providers require valid API keys and active network connectivity via `URLSession`.
- Streaming implementations rely on WebSocket transports for real-time data exchange.
- Batch STT uploads use a specialized state machine to monitor bytes sent and enforce phase-specific timeouts.
- `OpenRouterClient` supports a model chain for retrying failed requests and can transition from strict to relaxed routing parameters.