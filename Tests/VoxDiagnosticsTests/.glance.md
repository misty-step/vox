## Purpose
This directory contains the unit test suite for the `VoxDiagnostics` module, focusing on event logging, error mapping, and metadata resolution. It verifies the transformation of domain-specific errors into standardized diagnostic codes and the serialization of events into JSONL format. The tests also ensure the integrity of log management operations, including file rotation and the generation of compressed diagnostic export bundles.

## Key Roles
- **DiagnosticsErrorCodeTests.swift**: Validates the mapping of internal errors (STT, Streaming, Rewrite, Vox, and Audio Conversion) to normalized string codes and ensures `DiagnosticsEvent` and `DiagnosticsValue` types correctly round-trip through JSON.
- **DiagnosticsStoreTests.swift**: Tests the lifecycle of diagnostic logs, specifically verifying JSONL persistence, file rotation logic based on size and count constraints, and the creation of zip exports containing system context and log files.
- **ProductInfoTests.swift**: Verifies that application versioning and build metadata are correctly resolved from bundle info dictionaries or environment variable overrides.

## Dependencies and Caveats
- Depends on `VoxCore`, `Foundation`, and the Swift `Testing` framework.
- `DiagnosticsStoreTests` utilizes the system `/usr/bin/ditto` utility via `Process` to verify the contents of exported zip archives.
- Error code mapping defaults to the Swift type name for unknown error types.
- `DiagnosticsStore` manages file rotation by pruning files with the `diagnostics-` prefix when limits are exceeded.
- `ProductInfo` resolution prioritizes bundle info but falls back to environment variables `VOX_APP_VERSION` and `VOX_BUILD_NUMBER`.
- Diagnostic exports include a `context.json` file containing system state, such as `sttRouting`, `audioBackend`, and `processingLevel`.
- `DiagnosticsValue` decoding is tested to handle potential ambiguity between boolean and integer types during JSON round-tripping.
- `DiagnosticsEvent` supports optional session IDs, which are encoded as `null` when absent.