## Purpose
This directory contains the unit and integration test suite for the Vox application's core audio and interface logic. It validates audio device management, recording workflows, file encoding, and encryption processes. Additionally, it ensures the correctness of the Heads-Up Display (HUD) state transitions and accessibility compliance for VoiceOver users.

## Key Roles
- **AudioDeviceObserverTests.swift**: Validates audio input device detection, UID resolution, and the lifecycle of device observation.
- **AudioEncoderTests.swift**: Verifies CAF-to-Opus conversion, including compression efficiency, file extension handling, and error recovery for corrupted audio data.
- **AudioFileEncryptionTests.swift**: Tests 256-bit key generation, secure key zeroization, and round-trip encryption/decryption of audio files.
- **AudioRecorderTests.swift**: Validates audio level computation, sample rate conversion/resampling, and compatibility between `AVAudioPCMBuffer` and `AVAudioFile` processing formats.
- **CapturedAudioInspectorTests.swift**: Ensures captured CAF files contain valid audio frames and correctly identifies empty or unreadable headers.
- **HUDAccessibilityTests.swift & HUDStateTests.swift**: Verify UI state transitions (recording, processing, success) and the corresponding VoiceOver announcements and accessibility labels.
- **HotkeyRegistrationResultTests.swift**: Tests the success and failure reporting for hotkey registration, including error code formatting.

## Dependencies and Caveats
- Depends on **AVFoundation** for audio conversion, buffer management, and file format validation.
- Utilizes both **XCTest** and the Swift **Testing** framework for suite execution.
- Audio device tests include logic to skip execution in environments lacking audio input hardware.
- `AudioEncoder` tests specifically verify the `kAudioFormatOpus` codec and `.opus.caf` extension requirements.
- `AudioRecorder` tests address a macOS-specific crash by enforcing matching `commonFormat` and interleaving settings between files and buffers.
- `AudioFileEncryption` utilizes a 64KB chunk size for processing large files.
- Backend selection logic for recording is tested against values provided by the `VOX_AUDIO_BACKEND` environment variable.
- Accessibility tests validate specific formatting for recording durations (e.g., "MM:SS") within VoiceOver strings.