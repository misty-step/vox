## Purpose
This directory contains the unit test suite for the `VoxPerfAuditKit` framework. It validates the logic for configuration parsing, performance metric distributions, and the resolution of service provider plans. The tests ensure that the kit correctly handles input arguments, environment variables, and mathematical calculations for performance auditing.

## Key Roles
- **VoxPerfAuditKitTests.swift**: Houses multiple test suites, including `PerfAuditConfigTests` for argument and environment validation, `StageDistributionTests` for percentile calculations, and `PerfProviderPlanTests` for service provider selection logic.

## Dependencies and Caveats
- **Testing Framework**: Utilizes the `Testing` library for defining suites and expectations.
- **Configuration Parsing**: Validates that `PerfAuditConfig` correctly extracts values for audio URLs, output paths, iteration counts, and metadata like commit SHAs or pull request numbers.
- **Provider Resolution**: Requires specific environment variables (e.g., `OPENROUTER_API_KEY`, `ELEVENLABS_API_KEY`, `DEEPGRAM_API_KEY`) to successfully resolve a `PerfProviderPlan`.
- **Error Handling**: Explicitly tests for `PerfAuditError` cases, such as missing required API keys, invalid lane specifications, or negative warmup iterations.
- **Statistical Logic**: `StageDistribution` is verified to handle empty, single, and multiple samples, including linear interpolation for p50 and p95 percentiles.
- **Provider Selection Policy**: Tests confirm support for "auto" selection and "forced" provider overrides, with case-insensitive matching for provider IDs.
- **Service Routing**: Validates that the presence of a `GEMINI_API_KEY` alters the rewrite routing mode to "model-routed".