## Purpose
This directory contains shell scripts and Node.js utilities for executing, analyzing, and reporting on language model evaluations. The tools facilitate running automated "smoke" and "polish" tests via the `promptfoo` framework, identifying regressions against known failure benchmarks, and converting raw JSON results into formatted Markdown reports for review.

## Key Roles
- **check-smoke-results.js**: Parses evaluation results to identify unexpected regressions while filtering for known model failures and specific false negatives related to prompt injection and system overrides.
- **eval-full.sh / eval-smoke.sh**: Orchestrate evaluation runs using specified configuration and dataset files, such as `smoke.yaml` and `injection.yaml`.
- **eval-polish.sh / eval-polish-smoke.sh**: Execute specialized evaluations for "polish" or "bakeoff" scenarios, outputting results in both JSON and HTML formats.
- **format-report.js**: Generates a Markdown summary of evaluation metrics, including pass rates, token usage, costs, and per-test assertion details.
- **format-polish-report.js**: Produces a detailed Markdown report for manual review, grouping model outputs by provider and test case with support for score and latency metadata.

## Dependencies and Caveats
- Scripts depend on `npx promptfoo` for core evaluation functionality.
- Execution relies on the presence of specific configuration files in the parent directory, including `promptfooconfig.yaml`, `polish-smoke.yaml`, and `polish-bakeoff.yaml`.
- `check-smoke-results.js` uses hardcoded strings to identify known model failures, such as "Prompt injection â€” ignore instructions."
- Scripts utilize relative path navigation (`cd "$(dirname "$0")/.."`) to locate configuration and output directories.
- Node.js scripts require `fs` and `process` modules to handle file I/O and standard input/output streams.
- Reporting utilities assume a specific JSON structure provided by `promptfoo` results, including `gradingResult` and `componentResults` objects.
- `check-smoke-results.js` implements specific exit codes (1 or 2) to signal different failure states to the calling environment.