## Purpose
This directory serves as a repository for Architecture Decision Records (ADRs) that document significant design choices, their context, and their long-term consequences. It provides a historical record of the system's evolution, establishing patterns for simplicity-first design, audio capture strategies, and service routing. These documents ensure that architectural intent remains transparent and that future changes adhere to established constraints.

## Key Roles
- **0001-simplicity-first-design.md**: Establishes a "simplicity gate" for new features, strictly limiting the user-visible settings surface to API keys, microphone selection, and processing levels.
- **0002-session-extension-seam.md**: Defines the `SessionExtension` protocol to allow external wrappers to hook into the recording lifecycle for authorization, metering, and synchronization without modifying core orchestration.
- **0004-streaming-first-audio-capture-backend-policy.md**: Designates `AVAudioEngine` as the default capture backend to support streaming STT, while maintaining `AVAudioRecorder` as a legacy fallback.
- **0005-sequential-stt-routing-default.md**: Sets sequential fallback (ElevenLabs to Deepgram to Apple Speech) as the default STT routing strategy to minimize API costs and complexity.
- **0006-quality-gate-eval-only.md**: Restricts `RewriteQualityGate` scoring to evaluation and benchmark contexts, removing automated rejection from the production pipeline.
- **README.md and template.md**: Provide the governance framework, status lifecycle definitions, and the standardized format for authoring new architectural records.

## Dependencies and Caveats
- **Audio Backends**: The system depends on `AVAudioEngine` for streaming and `AVAudioRecorder` for legacy capture, toggled via the `VOX_AUDIO_BACKEND` environment variable.
- **STT Provider Chain**: Default routing follows a specific sequence: ElevenLabs (with timeout/retry) followed by Deepgram, then on-device Apple Speech.
- **Streaming Requirements**: Streaming STT is enabled by default when a Deepgram key is present but can be disabled via `VOX_DISABLE_STREAMING_STT`.
- **UI Constraints**: "Advanced" tabs and user-facing threshold tuning are explicitly prohibited to maintain product simplicity.
- **Quality Enforcement**: Production rewrites do not use automated quality gates; quality regression detection is shifted entirely to evaluation suites and manual observation.
- **Extension Stability**: The `SessionExtension` protocol creates a stable contract for hook ordering that must be maintained across refactors to support external wrappers.
- **Environment-Driven Configuration**: Several architectural behaviors, such as STT routing strategies and audio backends, are managed through internal environment variables rather than user-facing UI.