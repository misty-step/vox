## Purpose
This directory serves as the central documentation hub for the Vox macOS dictation application. It contains architectural specifications, design explorations, performance benchmarks, and operational guides. The documentation establishes technical constraints, records design decisions through Architecture Decision Records (ADRs), and defines the system's resilience strategies for audio capture and speech-to-text processing.

## Key Roles
- **ARCHITECTURE.md**: Defines module layering, STT resilience chains, data flow, and the non-negotiable audio capture contract.
- **CODEBASE_MAP.md**: Provides a structural overview of the SwiftPM modules, directory responsibilities, and environment variable configurations.
- **MODEL_EVALUATION.md**: Compares LLM rewrite models (Gemini, OpenRouter) based on latency, cost, and quality-gate pass rates.
- **RELEASE.md**: Outlines the automated Landfall versioning process and manual macOS signing/notarization requirements.
- **TRIAD_PLAYBOOK.md**: Establishes a decision-making framework for balancing quality, simplicity, and speed.
- **adr/**: Stores Architecture Decision Records documenting constraints like the "simplicity-first" design and service routing defaults.
- **performance/**: Contains latency budgets, SLOs for short audio recordings, and comparative provider evaluations.
- **issues/**: Details technical designs for core features including rewrite caching and streaming session orchestration.
- **postmortems/**: Records technical root causes for regressions, such as audio capture underflow, and subsequent hardening measures.
- **design/ & hud-prototype/**: Document UI explorations, layout evaluations, and state machine animations for the floating HUD.

## Dependencies and Caveats
- **STT Fallback Chain**: Defaults to a sequential primary-to-fallback routing: ElevenLabs to Deepgram to Apple Speech.
- **Audio Backends**: Uses `AVAudioEngine` by default for streaming; `AVAudioRecorder` serves as a legacy fallback via the `VOX_AUDIO_BACKEND` variable.
- **Security**: Audio captures are secured via per-recording AES-GCM encryption; diagnostics explicitly exclude transcripts and API keys.
- **OS Constraints**: On-device STT via `SpeechTranscriber` is restricted to macOS 26+ environments.
- **UI Simplicity**: ADR-0001 prohibits "advanced" tabs or threshold tuning to maintain a minimal user-facing settings surface.
- **Performance Targets**: Latency budgets are specifically scoped for recordings under 30 seconds.
- **API Dependencies**: Relies on external providers including ElevenLabs, Deepgram, Gemini, and OpenRouter for cloud-based processing.
- **Payload Validation**: The `CapturedAudioInspector` is required to reject header-only or empty audio captures before they reach the STT stage.